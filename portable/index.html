<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Support Bro · </title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <main class="layout">
        <section class="hero hero-shell">
            <div class="hero-content">
                <img src="./techsupportbrologo.png" alt="Tech Support Bro" class="hero-logo">
                <div class="hero-actions">
                    <button id="startTree" class="primary">Start troubleshooting</button>
                    <a class="secondary" href="https://docs.google.com/forms/d/e/1FAIpQLSfoxhKvog1UU0YnpnK1U1toIyQkNborx3IAVtJOpc-5VwKhAg/viewform?usp=dialog" target="_blank" rel="noopener">
                        Escalate to Garin
                    </a>
                </div>
            </div>
            <div class="hero-visual">
                <div class="grid-lines"></div>
                <div class="tablet-stage" id="tabletStage">
                    <div class="tablet-shadow"></div>
                    <div class="tablet" id="tabletModel">
                        <div class="tablet-face"></div>
                        <div class="tablet-back">
                            <img class="tablet-back-logo" draggable="false" src="./techsupportbrologo.png" alt="Tech Support Bro logo">
                        </div>
                        <div class="tablet-screen">
                            <video autoplay muted loop playsinline>
                                <source src="./ITChatBuddyAvatar.mp4" type="video/mp4">
                                <source src="./ITChatBuddyAvatar.mov" type="video/quicktime">
                                Your browser does not support inline video playback.
                            </video>
                            <h2 class="tablet-title">Tech Support Bro</h2>
                            <span class="tablet-caption">"What can I fix for you today?"</span>
                            <div class="tablet-screen-indicator"></div>
                        </div>
                    </div>
                    <div class="floating-badges">
                        <div class="floating-badge">Fix my home Wi-Fi</div>
                        <div class="floating-badge">Speed up my laptop</div>
                        <div class="floating-badge">Reset forgotten passwords</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="tree-card" style="margin-top: 18px;">
            <div class="tree-header" style="align-items: flex-start; gap: 8px;">
                <div>
                    <p class="node-path">Diagnostics</p>
                    <h2>Quick checks & scripts</h2>
                    <p class="node-summary">Run a quick network ping test or copy a safe PowerShell snippet to collect info.</p>
                </div>
                <div class="tree-controls" style="gap: 8px;">
                    <button class="ghost" id="pingTestBtn">Run ping test</button>
                    <span id="pingResult" class="node-summary" style="min-width: 160px;"></span>
                </div>
            </div>
            <div class="node-body" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 12px;">
                <div class="child-card">
                    <h3>Wi‑Fi & network</h3>
                    <p class="node-summary">Collect adapter info and test connectivity.</p>
                    <button class="ghost" data-command="ipconfig /all; ping 8.8.8.8; tracert 8.8.8.8">Copy network script</button>
                </div>
                <div class="child-card">
                    <h3>Sound & mic</h3>
                    <p class="node-summary">Launch Windows audio troubleshooter.</p>
                    <button class="ghost" data-command="msdt.exe /id AudioPlaybackDiagnostic">Copy playback troubleshooter</button>
                    <button class="ghost" data-command="msdt.exe /id AudioRecordingDiagnostic" style="margin-top: 6px;">Copy mic troubleshooter</button>
                </div>
                <div class="child-card">
                    <h3>Bluetooth & input</h3>
                    <p class="node-summary">List BT, keyboard, and mouse devices.</p>
                    <button class="ghost" data-command="Get-PnpDevice -Class Bluetooth; Get-PnpDevice -Class Keyboard,Mouse">Copy BT/input script</button>
                </div>
                <div class="child-card">
                    <h3>Camera & printer</h3>
                    <p class="node-summary">Open camera privacy settings and list printers/queues.</p>
                    <button class="ghost" data-command="start ms-settings:privacy-webcam">Copy camera settings launcher</button>
                    <button class="ghost" data-command="Get-Printer; Get-PrintJob -ComputerName localhost" style="margin-top: 6px;">Copy printer script</button>
                </div>
                <div class="child-card">
                    <h3>Storage & performance</h3>
                    <p class="node-summary">Check free space and disk health.</p>
                    <button class="ghost" data-command="Get-PSDrive -PSProvider FileSystem; wmic diskdrive get status">Copy storage script</button>
                </div>
            </div>
        </section>

        <section class="tree-card" id="treePanel">
            <div class="tree-header">
                <div>
                    <p class="node-path" id="nodePath">Start</p>
                    <h2 id="nodeTitle">Load plan</h2>
                    <p class="node-summary" id="nodeSummary">Click “Start troubleshooting” to load the root of the .</p>
                </div>
                <div class="tree-controls">
                    <button class="ghost" id="backBtn" disabled>Back</button>
                    <button class="ghost" id="restartBtn" disabled>Start over</button>
                    <button class="ghost" id="copyPlanBtn" disabled>Copy plan</button>
                </div>
            </div>
            <div class="node-body">
                <div class="node-response" id="nodeResponse">
                    The  instructions will appear here after you pick a branch.
                </div>
                <div class="node-tags" id="nodeTags"></div>
                <div class="node-links" id="nodeLinks"></div>
                <div class="node-children" id="nodeChildren"></div>
            </div>
        </section>

    </main>
    <script src="./app.js"></script>
    <script>
        (() => {
            const pingBtn = document.getElementById('pingTestBtn');
            const pingResult = document.getElementById('pingResult');
            const copyButtons = Array.from(document.querySelectorAll('button[data-command]'));

            const runPing = async () => {
                if (!pingBtn || !pingResult) return;
                pingBtn.disabled = true;
                pingResult.textContent = 'Testing...';
                const start = performance.now();
                try {
                    await fetch('https://www.google.com/generate_204', { cache: 'no-store' });
                    const ms = Math.round(performance.now() - start);
                    pingResult.textContent = `Online, ~${ms} ms`;
                } catch (e) {
                    pingResult.textContent = 'Offline or blocked';
                } finally {
                    pingBtn.disabled = false;
                }
            };

            if (pingBtn) pingBtn.addEventListener('click', runPing);

            copyButtons.forEach((btn) => {
                btn.addEventListener('click', async () => {
                    const cmd = btn.getAttribute('data-command') || '';
                    try {
                        await navigator.clipboard.writeText(cmd);
                        const old = btn.textContent;
                        btn.textContent = 'Copied';
                        setTimeout(() => (btn.textContent = old), 1400);
                    } catch (e) {
                        alert('Copy failed. You can copy this manually:\n\n' + cmd);
                    }
                });
            });
        })();
    </script>
</body>
</html>


